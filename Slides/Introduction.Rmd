---
title: "Introduction To Quantitative Political Science"
author: "Aleksandr Fisher"
latex_engine: xelatex
output:
  beamer_presentation: default
  slidy_presentation: default
theme: metropolis
highlight: zenburn
---


## Empirical Political Science

- Politics is full of claims

- The credibility of claims depends on the strength of evidence and argument

- This class aims to give you tools to:
    - make credible claims, and
    - evaluate claims made by others
    
## Empirical Political Science
![Immigration and Unemployment.](C:\Users\afisher\Documents\R Code\R-Code-for-Political-Science\Slides\Images For Slides\intro_img.jpg){#id .class width=70% height=70%}


## Claims in the Media

```{r pressure, echo=FALSE, fig.cap="Do American's Support Impeachment?", out.width = '70%'}
knitr::include_graphics("C:/Users/afisher/Documents/R Code/R-Code-for-Political-Science/Slides/Images For Slides/intro_impeach.jpg")
```

## Inference and Methodology

- **Inference**: a belief based on evidence
and rules for processing that evidence

- **Methodology**: “tools for gathering and
analyzing data to try to make valid
inferences


## Questions

- Does increased immigraton increase unemployment?
- Does democracy cause economic growth?
- does climate change increase the probability of civil war?

## Two Categories of Inference

- *Descriptive* Inference
    - What are the facts?
    
- *Causal* Inference
    - Why does soemthing occur?

## Descriptive Inference

- Seeks to describe the existance of something

- Examples:
    - Is the United States polarizing?
    - Is global terrorism increasing?
    - Is Russia an autocracy?
    
## Causal Inference

- Seeks to understand the effect of some variable(s) on some other variables(s)

- Questions about why:
    - Why is the United States polarizing?
    - Why is global terrorism increasing/decreasing?
    - Why is Russia not a democracy?
    
## Causal Inference (continued...)

- Can start with either:

    - A **dependent** variable (outcome)
    - An **independent** variable (cause)

## Causal Inference (continued...)

- What causes Y?
    - Associated with search for causes 
    - _What causes political polarization?_
    
- What happens if X?
    - Associated with 'experiments' 
    - _What happens when people recieve most of their news from social media networks?_
    
## Which of these is a causal research question?

## What makes a good research question
  
  - Start from political problem or puzzle
  
  - Builds on an existing research literature
  
  - Non-obvious
  
## Which is a better Research Question?



## Data Types

- **Numeric**:
    - Discrete (can be counted)
    - Continuous (can't be counted, i.e. decimals)
    
- **Categorical**:
    - generally not recorded as numbers
    - Party identification

- **Ordinal**:
    - categories with a specified order
    - think survey responses (strongly agree, somewhat agree,...)
    
## Cyanide and Happiness 2017 Politics Poll
```{r, echo=FALSE, warning=FALSE, message=FALSE, results='hide'}
library(ggplot2)
library(tidyverse)
library(ggthemes)
# read in CSV ( File path should have "/" slashes)
cah = read.csv('C:/Users/afisher/Documents/R Code/Resources/Data/Pulse of the Nation/201710cah_clean.csv')

```

## Looking at the Data (dim and glimpse)

\tiny
```{r}
# dim
dim(cah) # number of rows, number of columns

# glimpse
glimpse(cah) #observations, variables, and variable type
```
\normalsize

## Looking at the Data (head)

\tiny
```{r}
# head
head(cah) # first 6 observations
```
\normalsize

##  Numbers as data

- R can be used as a calculator

```{r}
2+2
```

- Everything you will use in R is saved in objects. 
    - This can be everything from a number or a word to complex datasets

- These are equivalent: 
```{r}
x <- 2
x = 2 
```

- Now `x` will return the number 2 whenever we write `x`

## Numbers as data

- When you are working with scripts, try to save as much you can in objects, so you only need to change information once

```{r}
y=x+7
y
```

- Wrapping object in parenthesis tells R that we do not only want to save some information in the object y, but that we also want to see what is saved in y.

```{r}
(y=x+7)
```

## More than one number

- Not limited to save only one number in an object. 
- The code below will return a row of numbers from 1 to 10.
```{r}
1:10
```

## Getting the Basics

- Don't forget to check and set your working directory
- R can't find files that aren't there

## Getting the Basics

- The Behavioral Risk Factor Surveillance System (BRFSS) is an annual telephone survey of 350,000 people in the United States. The BRFSS Web site contains a complete description of the survey, including the research questions that motivate the study and many interesting results derived from the data.

```{r,  message=FALSE, warning=FALSE, fig.keep = 'none'}
library(tidyverse)
source("http://www.openintro.org/stat/data/cdc.R")
CDC <- tbl_df(cdc)
class(cdc)
```

## Explore the data

- You can see and inspect the data set comfortably in RStudio with the View() command, which invokes a spreadsheet-style data viewer on a matrix-like R object.

\tiny
```{r}
CDC
```
\normalsize

## Explore the data

- After loading the data and converting it into a tibble, one should inspect the data to get some understanding about the structure and content. Common funtions for these tasks are:

- `<name-of-data-tibble>`: Display the first 10 rows and all columns that fit on one screen. It also prints an abbreviated description of the column type.

- `head(<name-of-df>)`, `tail(<name-of-df>)`: Return the first or last part. Use these commands if it is not a tibble but a data frame

- `dim()`: Retrieve the dimension

- `names()`: Get the names

## Explore the data

- `str()`: Display compactly the internal structure
  
- `glimpse()`: is the dplyr-version of str() showing values of each variable the whole sceen width, but does not display the number of levels and names of factor variables. But this feature of str() cannot be displayed completly with either many or long levels names.

- `View()`: With RStudio you can see and inspect the data set comfortably. The View() function invokes a spreadsheet-style data viewer.


## Install Packages 

- When you download R from the Comprehensive R Archive Network (CRAN), you get that "base" R system

- The base R system comes with basic functionality; implements the R language

- One reason R is so useful is the large collection of packages that extend the basic functionality of R

- R packages are developed and published by the larger R community


## Install Packages

- Packages can be installed with the `install.packages()` function in R

- To install a single package, pass the name of the lecture to the install.packages() function as the first argument

- You can install multiple R packages at once with a single call to install.packages()


- `install.packages(c("dplyr", "ggplot2", "devtools"))`


## Loading R Packages

- Installing a package does not make it immediately available to you in R; you must load the package

- The library() function is used to load packages into R

- The following code is used to load the ggplot2 package into R

```{r, warning=FALSE, message=FALSE}
library(ggplot2)
```

- NOTE: Do not put the package name in quotes!

## Arbuthnot Dataset

- The Arbuthnot data set refers to Dr. John Arbuthnot, an 18th century physician, writer, and mathematician. He was interested in the ratio of newborn boys to newborn girls, so he gathered the baptism records for children born in London for every year from 1629 to 1710. We can view the data by typing its name into the console.

- Read data from online with the code below:

```{r}
source("http://www.openintro.org/stat/data/arbuthnot.R")
```

## Look as Data

\tiny
```{r, warnings=FALSE, message=FALSE}
dim(arbuthnot) #get number of rows and columns
glimpse(arbuthnot) #get the structure of the data
```
\normalsize

## Look as Data

\tiny
```{r, warnings=FALSE, message=FALSE}
names(arbuthnot)
#We can access the data in a single column of a data frame separately.
arbuthnot$boys
```
\normalsize


## Plot Data - Base R


```{r,  message=FALSE, warning=FALSE, results='hide', fig.keep = 'none'}
plot(x = arbuthnot$year, y = arbuthnot$girls)
```

\tiny
```{r, warnings=FALSE, message=FALSE, echo=FALSE}
plot(x = arbuthnot$year, y = arbuthnot$girls)
```
\normalsize

## Plot Data - qplot R

- R has some powerful functions for making graphics. We can create a simple plot of the number of girls baptized per year with qplot.


```{r,  message=FALSE, warning=FALSE, results='hide', fig.keep = 'none'}
qplot(x = year, y = girls, data = arbuthnot)
```

## Plot Data - qplot R

\tiny
```{r, warnings=FALSE, message=FALSE, echo=FALSE}
qplot(x = year, y = girls, data = arbuthnot)
```

## Plot Data - line graph

\tiny
```{r, warnings=FALSE, message=FALSE}
plot(x = arbuthnot$year, y = arbuthnot$girls, type = "l")
```
\normalsize

## Plot Data - line graph
\tiny
```{r, warnings=FALSE, message=FALSE}
qplot(x = year, y = girls, data = arbuthnot, geom = "line")

```
\normalsize

## Manipulating Data - Creating New Variables

- Now, suppose we want to plot the total number of baptisms. To compute this, we could use the fact that R is really just a big calculator. We can type in mathematical expressions like

\tiny
```{r, warnings=FALSE, message=FALSE}

5218 + 4683

arbuthnot$boys + arbuthnot$girls
```
\normalsize

## Manipulating Data - Creating New Variables (mutate)

- We’ll be using this new vector to generate some plots, so we’ll want to save it as a permanent column in our data frame.


```{r, warnings=FALSE, message=FALSE}
arbuthnot <- arbuthnot %>%
  mutate(total = boys + girls)
```

## Piping Operator

- The `%>%` operator is called the piping operator. It takes the output of the previous expression and pipes it into the first argument of the function in the following one. To continue our analogy with mathematical functions, `x %>% f(y)` is equivalent to `f(x, y)`.

## Piping Operator

- __A note on piping:__ Note that we can read these three lines of code as the following:

- "Take the arbuthnot dataset and pipe it into the mutate function. Mutate the arbuthnot data set by creating a new variable called total that is the sum of the variables called boys and girls. 

- Then assign the resulting dataset to the object called arbuthnot, i.e. overwrite the old arbuthnot dataset with the new one containing the new variable."

## Manipulating Data - Adding in plot

\tiny
```{r, warnings=FALSE, message=FALSE}
plot(arbuthnot$year, arbuthnot$boys + arbuthnot$girls, type = "l")
```
\normalsize

## Manipulating Data - Adding in qplot

\tiny
```{r, warnings=FALSE, message=FALSE}
qplot(x = year, y = total, data = arbuthnot, geom = "line")
```
\normalsize

## Manipulating Data - creating ratios

\tiny
```{r, warnings=FALSE, message=FALSE}
5218 / 4683
```
\normalsize

## Manipulating Data - creating ratios
\tiny
```{r, warnings=FALSE, message=FALSE}
arbuthnot$boys / arbuthnot$girls

arbuthnot <- arbuthnot %>%
  mutate(boy_to_girl_ratio = boys / girls)
```
\normalsize

## Manipulating Data - ratios using mutate

\tiny
```{r, warnings=FALSE, message=FALSE}
arbuthnot <- arbuthnot %>%
  mutate(boy_ratio = boys / total)
```
\normalsize

## Manipulating Data - True/False

\tiny
```{r, warnings=FALSE, message=FALSE}
arbuthnot$boys > arbuthnot$girls
```
\normalsize

## Manipulating Data

- Make a plot that displays the boy-to-girl ratio for every year in the data set. What do you see? Does Arbuthnot’s observation about boys being born in greater proportion than girls hold up in the U.S.? Include the plot in your response.

- In what year did we see the most total number of births in the U.S.? 

## Adding Labels to our plots

- To add a title to your plot, add the code:
    - `+ggtitle("Your Title Here")` to your line of basic ggplot code.

- Note: You can also use:
    - `+labs(title = "Title"`)`

- To alter the labels on the axis, add the code:
    - `+labs(y= "y axis name", x = "x axis name")`

- Can also use:
    - `+xlab("x axis name"` and `+ylab("y axis name")`

## Adding Labels to our plots

\tiny
```{r, warnings=FALSE, message=FALSE, results='hide',fig.keep='none'}
arbuthnot %>% ggplot(aes(year, total)) +
        geom_line() +
        xlab("Year") + ylab("Baptized children (boys and girls)") +
        ggtitle("Baptized children, born in London. Recorded by Dr. John Arbuthnot.")
```
\normalsize

## Adding Labels to our plots

\footnotesize
```{r, warnings=FALSE, message=FALSE, echo=FALSE}
arbuthnot %>% ggplot(aes(year, total)) +
        geom_line() +
        xlab("Year") + ylab("Baptized children (boys and girls)") +
        ggtitle("Baptized children, born in London. Recorded by Dr. John Arbuthnot.")
```
\normalsize

## Ratio Plot

- Similarly to how we computed the total number of births, we can compute different kinds of ratios (boys to girls, boys to total, girls to total).

\tiny
```{r, warnings=FALSE, message=FALSE, results='hide',fig.keep='none'}
arbuthnot <- arbuthnot %>%
  mutate(boy_to_girl_ratio = boys / girls)

arbuthnot %>% 
        ggplot(aes(year, boy_to_girl_ratio)) +
        geom_line() +
        xlab("Year") + ylab("Baptized ratio (boys to girls)") +
        ggtitle("Baptized children, born in London. Recorded by Dr. John Arbuthnot.")
```
\normalsize


## Ratio Plot

\tiny
```{r, warnings=FALSE, message=FALSE, echo=FALSE}
arbuthnot <- arbuthnot %>%
  mutate(boy_to_girl_ratio = boys / girls)

arbuthnot %>% 
        ggplot(aes(year, boy_to_girl_ratio)) +
        geom_line() +
        xlab("Year") + ylab("Baptized ratio (boys to girls)") +
        ggtitle("Baptized children, born in London. Recorded by Dr. John Arbuthnot.")
```
\normalsize


